<div class="row justify-content-center">
  <div class="col-lg-6 mt-5 mt-lg-0">
    <div class="col-sm-9">
      <br/><br/>
      <h1 class="display-2 mb-0">Medical History</h1>
    </div>
    <br/><br/>
    <form [formGroup]="searchForm" (ngSubmit)="search()" role="form" method="get">
      <select formControlName="selectPatient" class="btn btn-secondary dropdown-toggle">
        <option [ngValue]="null" disabled>Patient</option>
        <option class="dropdown-item" *ngFor="let patient of patients" [ngValue]="patient"
                id="Patient">{{patient}}</option>
      </select>
    </form>
    <br/>
    <input (click)="search()" class="btn btn-primary my-4" type="submit" value="Search"/>
    <input (click)="add()" class="btn btn-primary my-4" type="submit" value="Add"/>
    <br/><br/>
    <div class="row justify-content-center">
      <div class="col-lg-6 mt-5 mt-lg-0" *ngIf="searchedFlag">
        <div class="col-sm-9">
          <br/><br/>
          <h1 class="display-3 mb-0">Patient's medical history</h1>
        </div>
        <br/>
        <div class="d-flex justify-content-center">
          <ng-container class="custom-tab-content flex-column flex-md-row">
            <table class="table">
              <thead>
              <tr>
                <th>Date</th>
                <th>Details</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let medH of medicalHistory">
                <td>{{medH.date | date}}</td>
                <td>{{medH.details}}</td>
              </tr>
              </tbody>
            </table>
          </ng-container>
        </div>
      </div>
    </div>

    <div *ngIf="addFlag" class="container">
      <form [formGroup]="medHistoryForm" (ngSubmit)="!medHistoryForm.invalid && saveMedHistory()" role="form">
        <div class="form-group mb-3" [ngClass]="{'focused':focus===true}">
          <div class="input-group input-group-alternative">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="ni ni-calendar-grid-59"></i></span>
            </div>
            <input class="form-control datepicker" placeholder="Date" formControlName="date"
                   id="date" name="date" ngbDatepicker #d="ngbDatepicker" (click)="d.toggle()"
                   type="text" (select)="onDateSelection($event)" autocomplete="off"/>
          </div>
        </div>
        <div class="form-group mb-3" [ngClass]="{'focused':focus===true}">
          <div class="input-group input-group-alternative">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="ni ni-email-83"></i></span>
            </div>
            <textarea class="form-control" placeholder="Details" type="text" id="details"
                      [formControlName]="'details'"
                      name="details" autofocus></textarea>
          </div>
        </div>
        <button type="submit" class="btn btn-primary my-4">Add</button>
      </form>
    </div>
  </div>
</div>
